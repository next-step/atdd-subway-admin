# 3주차 STEP3_구간 추가 기능

## 🚀 기능 요구사항
- ``요구사항 설명``에서 제공되는 인수 조건을 기반으로 **지하철 구간 추가 기능**을 구현하세요.
- 요구사항을 정의한 인수 조건을 조출하세요.
- 인수 조건을 검증하는 인수 테스트를 작성하세요.
- 예외 케이스에 대한 검증도 포함하세요.

## 🚀 프로그래밍 요구사항
- **인수 테스트 주도 개발 프로세스**에 맞춰서 기능을 구현하세요.
    - ``요구사항 설명``을 참고하여 인수 조건을 정의
    - 인수 조건을 검증하는 인수 테스트 작성
    - 인수 테스트를 충족하는 기능 구현
- 인수 조건은 인수 테스트 메서드 상단에 주석으로 작성하세요
    - 뼈대 코드의 인수 테스트를 참고
- 인수 테스트의 결과가 다른 인수 테스트에 영향을 끼치지 않도록 인수 테스트를 서로 격리 시키세요.
- 인수테스트의 재사용성과 가독성, 그리고 빠른 테스트 의도 파악을 위해 인수 테스트를 리팩터링 하세요.

### 지하철 구간 등록 인수 테스트 작성과 기능 구현

1. 역 사이에 새로운 역을 등록할 경우
    - 새로운 길이를 뺀 나머지를 새롭게 추가된 역과의 길이로 설정한다.
    ````
        when 지하철 노선의 구간을 생성하면
        then : 응답 결과에서 새롭게 생성한 구간의 upstation과 downstation 이름을 찾을 수 있다.
   ````
2. 새로운 역을 상행 종점으로 등록할 경우
   ````
        when 새로운 역을 상행 종점으로 등록하면
        then 응답 결과에서 새롭게 등록한 상행 종점 역을 찾을 수 있고 해당 상행 종점 역은 첫번째로 위치한다.
   ````
3. 새로운 역을 하행 종점으로 등록할 경우
   ````
        when 새로운 역을 하행 종점으로 등록하면
        then 응답 결과에서 새롭게 등록한 상행 종점 역을 찾을 수 있고 해당 상행 종점 역은 마지막에 위치한다.
   ````

### 구간 등록 시 예외 케이스
1. 역 사이에 새로운 역을 등록할 경우 기존 역 사이 길이보다 크거나 같으면 등록을 할 수 없다.
   ````
       when : 지하철 노선의 구간을 생성할때 거리를 라인의 거리와 같은 거리로 생성하면
       then : Bad_Request 에러가 발생한다. 
   ````
2. 상행역과 하행역이 이미 노선에 모두 등록되어 있다면 추가할 수 없다.
   ````
       when 구간 등록시 상행역과 하행역이 이미 노선에 등록되어 있으면
       Bad_Request 에러가 발생한다. 
    ````
3. 상행역과 하행역 둘 중 하나도 포함되어 있지 않으면 추가할 수 없다.
    ````
       given 신분당선에 등록되어 있지않은 2개의 역을 만들고
       when 2개의 역을 각각 upstation, downstation으로 구간 등록을 하면
       then : Bad_Request 에러가 발생한다.
    ````
